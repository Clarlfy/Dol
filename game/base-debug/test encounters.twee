:: The Farm [nobr]
<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<generatedog1>><<generatepig2>><<generatecat3>><<generatedog4>><<generatepig5>><<beastNOGENinit>>
		You stumble from the woods onto the verge of a steep cliff. Losing your balance <span class="red">you tip over the edge, tumbling to the bottom.</span><br><br>
		When you recover, you find yourself in the main yard of a small farm. You are stunned to see several animals dancing around you... singing...<br><br>
		<span class="green">Old McDonalds rape-y farm<br>
		E-I-E-I-O<br>
		And on this farm we found a whore<br>
		E-I-E-I-O</span><br><br>
		<span class="red">They stop singing and advance on you</span><br>
	<<controlloss>>
	<<violence 1>>
	<<neutral 1>>
	<<molested>>
<</if>>

<<effects>>
<<effectsman>>
<br>
<<beast>>
<br><br>
DEBUG: Number: $beastno 
<br><br>
<<stateman>>
<br><br>
<<actionsman>>

<<if $finish is 1>>
	<span id="next"><<link [[Next|The Farm Finish]]>><</link>></span><<nexttext>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<span id="next"><<link [[Next|The Farm Finish]]>><</link>></span><<nexttext>>
<<elseif $enemyhealth lte 0>>
	<span id="next"><<link [[Next|The Farm Finish]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[Next|The Farm]]>><</link>></span><<nexttext>>
<</if>>


:: The Farm Finish [nobr]

<<effects>>
DEBUG: $enemyarousal $enemyhealth $beastno $finish<br>
<<if $enemyhealth lte 0>>
	<<beastwound>>
	<<if $beastno gte 3>>
		The $lastbeast recoils in pain and fear, but a $beasttype is eager for a go.
		<<set $beastno -= 1>>
		<br><br>
		[[Next|The Farm]]
	<<elseif $beastno is 2>>
		The $lastbeast recoils in pain and fear, but the last is eager for a go.
		<<set $beastno -= 1>>
		<br><br>
		[[Next|The Farm]]
	<<elseif $beastno is 1>>
		The $lastbeast recoils in pain and fear.
		<<set $beastno -= 1>>
		<br><br>
		<<link [[Next|The Farm Finish]]>><<set $finish to 1>><</link>>
	<</if>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<<beastejaculation>>
	<<if $beastno gte 3>>
		Satisfied, the $lastbeast moves and a $beasttype takes its turn.
		<<set $beastno -= 1>>
		<br><br>
		[[Next|The Farm]]
	<<elseif $beastno is 2>>
		Satisfied, the $lastbeast moves and the last takes its turn.
		<<set $beastno -= 1>>
		<br><br>
		[[Next|The Farm]]
	<<elseif $beastno is 1>>
		Satisfied, the $lastbeast moves away from you.
		<<set $beastno -= 1>>
		<br><br>
		<<link [[Next|The Farm Finish]]>><<set $finish to 1>><</link>>
	<</if>>
<<elseif $finish is 1>>
	<<if $enemywounded is 1 and $enemyejaculated is 0>>
		The $beasttype whimpers and flees into a barn.
	<<elseif $enemywounded is 0 and $enemyejaculated is 1>>
		The $beasttype leaves you laying on the grass.
	<<elseif $enemywounded gte 2 and $enemyejaculated is 0>>
		Feeling that you're more trouble than you're worth, the animals dolphins flee to a nearby barn.
	<<elseif $enemywounded is 0 and $enemyejaculated gte 2>>
		The animals leave you spent and shivering on the grass.
	<<elseif $enemywounded gte 1 and $enemyejaculated gte 1>>
		The animals leave you spent and shivering on the grass.
	<</if>>
	<br><br>
	<<tearful>> you gather yourself.
	<br><br>
	<<clotheson>>
	<<endcombat>>
	<<destinationeventend>>
	Out of nowhere a goat runs from the shed. Rearing back, <span class="green">it kicks you all the way to Domus Street and through your bedroom window. </span><br>
	<<link [[Next|Bedroom]]>><</link>>
<</if>>


:: Beast Parade [nobr]
<!-- Used to debug Beast generation by displaying all attributes. -->
<span class="red">TOTAL BEAST TYPES: $BeastList.length<br></span>

<<for _i = 0; _i lt $BeastList.length; _i++>>
	/% <<generateBEAST 1 $BeastList[_i]>><!-- This can call all m/f if specified --> %/
	<<beastNEWinit 1 $BeastList[_i]>>
	<br>
	Introducing Beast <<print _i>>: <span class="green">$NPCList[0].description $NPCList[0].type</span><br>
	PRONOUN: <span class="red">$NPCList[0].pronoun</span> GENDER: <span class="red">$NPCList[0].gender</span><br>
	PPSize,Desc: <span class="gold">$NPCList[0].penissize, $NPCList[0].penisdesc</span> BREASTSize,Desc: <span class="gold">$NPCList[0].breastsize, $NPCList[0].breastsdesc</span><br>
	PenActiv: <span class="gold">$NPCList[0].penis</span> VagActiv: <span class="gold">$NPCList[0].vagina</span>
	<br>
	/% DOM: $NPCList[0].dom LUST $NPCList[0].lust RAGE: $NPCList[0].rage TRAUMA $NPCList[0].trauma<br> %/
	/% STATE: $NPCList[0].state<br> %/
<</for>>

[[Next|Bedroom]]

:: Beast Train [nobr]
<!-- Used to debug Beast Train -->
<<beastNEWinit 6 dolphin>>
<span class="red">BEAST TRAIN: $beastno</span>
<br>
<<for _x = 0; _x < 6; _x++>> 
Introducing Beast <<print _x+1>>: <span class="green">$NPCList[_x].description $NPCList[_x].type</span><br>
PRONOUN: <span class="red">$NPCList[_x].pronoun</span> GENDER: <span class="red">$NPCList[_x].gender</span><br>
PPSize,Desc: <span class="gold">$NPCList[_x].penissize, $NPCList[_x].penisdesc</span> BREASTSize,Desc: <span class="gold">$NPCList[_x].breastsize, $NPCList[_x].breastsdesc</span><br>
PenActiv: <span class="gold">$NPCList[_x].penis</span> VagActiv: <span class="gold">$NPCList[_x].vagina</span>
<br><br>
<</for>>

[[Next|Bedroom]]

:: NNPC Parade [nobr]
<!-- Used to debug Named NPCs by displaying all attributes. Note that running this in Debug introduces all NNPCs to PC -->
<span class="red">TOTAL NAMED NPCS: $NPCName.length<br></span>
<!-- Example of introduction, varible set / increment, and put away of npc -->
/% <<npc Robin>> %/
/% In walks $npc, and takes a bow. <<He>> has more Trauma now. And out <<he>> goes.<br> %/
/% <<npcset $npc trauma 80>> %/
/% <<npcincr $npc trauma 100>> %/
/% <<endnpc>> %/

<<for _i = 0; _i lt $NPCName.length; _i++>>
	<<npc $NPCName[_i].nam>>
	<br>
	Introducing NPC Number <<print _i>>: <span class="green">$NPCName[_i].nam the $NPCName[_i].title</span><br>
	PRONOUN: <span class="red">$NPCName[_i].pronoun</span> GENDER: <span class="red">$NPCName[_i].gender</span><br>
	PPSize,Desc: <span class="gold">$NPCName[_i].penissize, $NPCName[_i].penisdesc</span> BREASTSize,Desc: <span class="gold">$NPCName[_i].breastsize, $NPCName[_i].breastsdesc</span><br>
	TYPE: <span class="red"><<if $NPCName[_i].adult>>Adult<<elseif $NPCName[_i].teen>>Teen<<else>>???<</if>></span>  INSECURITY: <span class="red">$NPCName[_i].insecurity<br></span>
	TRUST: $NPCName[_i].trust LOVE: $NPCName[_i].love DOM: $NPCName[_i].dom LUST $NPCName[_i].lust RAGE: $NPCName[_i].rage TRAUMA $NPCName[_i].trauma<br>
	STATE: $NPCName[_i].state<br>
	You have <<if $NPCName[_i].init is 1>>been introduced to <<himstop>><<else>>not been introduced to <<himstop>><</if>><br>
	<<endnpc $NPCName[_i].nam>>
<</for>>

[[Next|Bedroom]]

:: Water Balloon [nobr]
<!-- Keeping this only as an example on how to use Widget as Event for debug -->
<<street10>>
[[Next|Domus Street]]


:: Abomination [nobr]

<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<controlloss>>
	<<violence 1>>
	<<neutral 1>>
	<<molested>>
	<<abomination>>
	You awaken to find yourself being assaulted by a strange beast!
<</if>>
<<effects>>
<<effectsmult>><<man>>
<<stateman>>
<br><br>
<<actionsmult>>
<<if $alarm is 1>>
	<<if $rescue is 1>>
		<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
	<<else>>
		No one comes to your aid.
		<<set $alarm to 0>>
		<<if $drugged gte 1>>Intoxicated as you are, you couldn't cry very convincingly.<</if>>
		<br><br>
		<<if $enemyarousal gte $enemyarousalmax>>
			<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
		<<else>>
			<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
		<</if>>
	<</if>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
<<elseif $enemyhealth lte 0>>
	<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[Next->Abomination]]>><</link>></span><<nexttext>>
<</if>>


:: Monster Test [nobr]

<<set $outside to 1>><<set $location to "sea">><<effects>>

<<if $molestationstart is 1>><<set $molestationstart to 0>>
<<set $combat to 1>>
<<molested>>
<<controlloss>>

<<set $enemytype to "tentacles">>
<<tentaclestart 6 15>>

<<set $vorestage to 1>>
<<set $vorecreature to "whale">>
<<set $vorestrength to 1>><<set $position to "doggy">>
	<<if $hallucinations gte 1>>
	<<set $voretentacles to 1>>
	<<else>>
	<<set $voretentacles to 0>>
	<</if>>

<<set $swarmname to "swarms">>
<<set $swarmmove to "moving towards you">>
<<set $swarmcreature to "eels">>
<<set $swarmspill to "encircle you">>
<<set $swarmsteady to "fend off">>
<<set $swarmSteady to "Fend off">>
<<set $swarmcount to 10>>
<<set $swarm1 to "active">>
<<set $swarm2 to "contained">>
<<set $swarm3 to "contained">>
<<set $swarm4 to "contained">>
<<set $swarm5 to "contained">>
<<set $swarm6 to "contained">>
<<set $swarm7 to "contained">>
<<set $swarm8 to "contained">>
<<set $swarm9 to "contained">>
<<set $swarm10 to "contained">>
<<set $swarmactive to 1>>
<<set $swimdistance to 20>>
<<set $water to 1>>

<</if>>

<<voreeffects>><<swarmeffects>><<effectstentacles>>
<<vore>><<swarm>><<tentacles>>
<<statetentacles>>
<<voreactions>><<swarmactions>><<actionstentacles>>


<<if $stress gte 10000>>
<span id="next"><<link [[Next|Monster Test]]>><</link>></span><<nexttext>>
<<elseif $vorestage lte 0>>
<span id="next"><<link [[Next|Monster Test]]>><</link>></span><<nexttext>>
<<else>>
<span id="next"><<link "Next">><<script>>state.display(state.active.title, null, "back")<</script>><</link>></span><<nexttext>>
<</if>>

:: DP Test [nobr]
<<if $molestationstart is 1>>
<<set $molestationstart to 0>>
<<controlloss>>
<<violence 1>>
<<neutral 1>>
<<molested>>

<<generate1>><<generate2>><<maninit>>
<<set $NPCList[0].penis to "vagina">><<set $vaginause to "penis">><<set $vaginastate to "penetrated">>
<<set $NPCList[1].penis to "anus">><<set $anususe to "penis">><<set $anusstate to "penetrated">>
<</if>>


<<effects>>
<<effectsman>><<man>>

<<stateman>>
<br><br>
<<actionsman>>

	<<if $alarm is 1>>
		<<if $rescue is 1>>
		<span id="next"><<link [[Next->DP Test]]>><</link>></span><<nexttext>>
		<<else>>
		No one comes to your aid.
		<<set $alarm to 0>>
		<<if $drugged gte 1>>Intoxicated as you are, you couldn't cry very convincingly.<</if>>
		<br><br>
			<<if $enemyarousal gte $enemyarousalmax>>
			<span id="next"><<link [[Next->Molestation Ejaculation]]>><</link>></span><<nexttext>>
			<<elseif $enemyhealth lte 0>>
			<span id="next"><<link [[Next->Molestation Escape]]>><</link>></span><<nexttext>>
			<<else>>
			<span id="next"><<link [[Next->DP Test]]>><</link>></span><<nexttext>>
			<</if>>
		<</if>>
	<<elseif $enemyarousal gte $enemyarousalmax>>
	<span id="next"><<link [[Next->Molestation Ejaculation]]>><</link>></span><<nexttext>>
	<<elseif $enemyhealth lte 0>>
	<span id="next"><<link [[Next->Molestation Escape]]>><</link>></span><<nexttext>>
	<<else>>
	<span id="next"><<link [[Next->DP Test]]>><</link>></span><<nexttext>>
<</if>>


:: Wolf Pack [nobr]
<<if $molestationstart is 1>>
<<set $molestationstart to 0>>
<<controlloss>>
<<violence 1>>
<<neutral 1>>
<<molested>>

<<dogpackinit>>
You awaken to find yourself surrounded by a pack of stray dogs!
<</if>>


<<effects>>
<<effectsman>>
<br>
<<beast>>
<br><br>

<<stateman>>
<br><br>
<<actionsman>>

	<<if $alarm is 1>>
		<<if $rescue is 1>>
		<span id="next"><<link [[Next->Wolf Pack Alarm]]>><</link>></span><<nexttext>>
		<<else>>
		No one comes to your aid.
		<<set $alarm to 0>>
		<<if $drugged gte 1>>Intoxicated as you are, you couldn't cry very convincingly.<</if>>
		<br><br>
			<<if $enemyarousal gte $enemyarousalmax>>
			<span id="next"><<link [[Next|Wolf Pack Ejaculation]]>><</link>></span><<nexttext>>
			<<elseif $enemyhealth lte 0>>
			<span id="next"><<link [[Next->Wolf Pack Escape]]>><</link>></span><<nexttext>>
			<<else>>
			<span id="next"><<link [[Next|Wolf Pack]]>><</link>></span><<nexttext>>
			<</if>>
		<</if>>
	<<elseif $enemyarousal gte $enemyarousalmax>>
	<span id="next"><<link [[Next->Wolf Pack Ejaculation]]>><</link>></span><<nexttext>>
	<<elseif $enemyhealth lte 0>>
	<span id="next"><<link [[Next->Wolf Pack Escape]]>><</link>></span><<nexttext>>
	<<else>>
	<span id="next"><<link [[Next->Wolf Pack]]>><</link>></span><<nexttext>>
	<</if>>

:: Wolf Pack Escape [nobr]
<<effects>>
<<beastwound>>


<<if $beastno gte 3>>
The beast recoils in pain and fear, but another takes its place.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack]]

<<elseif $beastno is 2>>
The beast recoils in pain and fear, but the other takes its place.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack]]

<<elseif $beastno is 1>>
The beast recoils in pain and fear.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack End]]

<</if>>


:: Wolf Pack Ejaculation [nobr]
<<effects>>
<<beastejaculation>>

<<if $beastno gte 3>>
Satisfied, the beast leaves you be. Another takes its place.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack]]

<<elseif $beastno is 2>>
Satisfied, the beast leaves you be. The other takes its place.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack]]

<<elseif $beastno is 1>>
Satisfied, the beast leaves you be.
<<set $beastno -= 1>>
<br><br>

[[Next|Wolf Pack End]]

<</if>>


:: Wolf Pack End [nobr]
<<effects>>

<<if $enemywounded is 1 and $enemyejaculated is 0>>
The wolf whimpers and flees into the forest.
<<elseif $enemywounded is 0 and $enemyejaculated is 1>>
The wolf leaves you lying on the grass.
<<elseif $enemywounded gte 2 and $enemyejaculated is 0>>
Feeling that you're more trouble than you're worth, the wolves flee into the forest.
<<elseif $enemywounded is 0 and $enemyejaculated gte 2>>
The wolves leave you spent and shivering on the grass.
<<elseif $enemywounded gte 1 and $enemyejaculated gte 1>>
The wolves leave you spent and shivering on the grass. One seems to be limping.
<</if>>
<br><br>

<<clotheson>>
<<endcombat>>