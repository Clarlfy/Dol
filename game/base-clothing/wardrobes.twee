:: Widgets Wardrobe [widget]
<<widget "wardrobewear">><<nobr>>


<<wardrobesanity>>

<<if $wear is "strip">>
You remove your clothing.
<br><br>

<<undress $wardrobe_location>>
<</if>>

<<wearoutfit>>


	<<if $wear_upper gte 0 and $corruption_slime gte 80 and $willpower lt 800 and $wardrobe.upper[$wear_upper].reveal lt 500 and !$wardrobe.upper[$wear_upper].type.includesAny("school", "event") and $wear_delete is 0>>
		<span class="red">You were unable to equip your $wardrobe.upper[$wear_upper].name as the slime in your ear did not permit it.</span>
		<br><br>
	<<elseif $wear_upper gte 0 and $worn.upper.cursed is 1 or $wear_upper gte 0 and $wardrobe.upper[$wear_upper].one_piece is 1 and $worn.lower.cursed is 1>>
		You try to remove the <<bottomscomma>> but fail. <<cursedtext $worn.upper.name $worn.lower.name>>
		<br><br>
	<<elseif $wear_upper is "strip">>
		You remove the $worn.upper.name.<<upperundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_upper is "large_towel">>
		<<upperundress $wardrobe_location>><<lowerundress $wardrobe_location>><<set $worn.upper to clone($clothes.upper[14])>><<set $worn.upper.colour to clone($worn.upper.colour_options.random())>><<set $worn.lower to clone($clothes.lower[15])>><<set $worn.lower.colour to clone($worn.upper.colour)>>
		You tie a large towel around your chest.
		<br><br>
	<<elseif $wear_upper is "towel">>
		<<upperundress $wardrobe_location>><<set $worn.upper to clone($clothes.upper[3])>><<set $worn.upper.colour to clone($worn.upper.colour_options.random())>>
		You tie a towel around your chest.
		<br><br>
	<<elseif $wear_upper isnot "none">>
		<<if $wear_delete is 1>>
			<<if $wardrobe.upper[$wear_upper].one_piece is 1>>
				<<for _d to 0; _d lt $wardrobe.lower.length; _d++>>
					<<if $wardrobe.upper[$wear_upper].set is $wardrobe.lower[_d].set and $wardrobe.upper[$wear_upper].colour is $wardrobe.lower[_d].colour and $wardrobe.upper[$wear_upper].accessory_colour is $wardrobe.lower[_d].accessory_colour>>
						<<if $wardrobe.lower[_d].colour isnot "custom">>
							<<set $wardrobe.lower.deleteAt(_d)>>
							<<break>>
						<<else>>
							<<set _matched to 0>>
							<<if $wardrobe.upper[$wear_upper].colourCustom isnot undefined and $wardrobe.lower[_d].colourCustom isnot undefined>>
								<<if $wardrobe.upper[$wear_upper].colourCustom is $wardrobe.lower[_d].colourCustom>>
									<<set _matched++>>
								<</if>>
							<<elseif $wardrobe.upper[$wear_upper].colourCustom is undefined and $wardrobe.lower[_d].colourCustom is undefined>>
								<<set _matched++>>
							<</if>>
							<<if $wardrobe.upper[$wear_upper].accessory_colourCustom isnot undefined and $wardrobe.lower[_d].accessory_colourCustom isnot undefined>>
								<<if $wardrobe.upper[$wear_upper].accessory_colourCustom is $wardrobe.lower[_d].accessory_colourCustom>>
									<<set _matched++>>
								<</if>>
							<<elseif $wardrobe.upper[$wear_upper].accessory_colourCustom is undefined and $wardrobe.lower[_d].accessory_colourCustom is undefined>>
								<<set _matched++>>
							<</if>>
							<<if _matched is 2>>
								<<set $wardrobe.lower.deleteAt(_d)>>
								<<break>>
							<</if>>
						<</if>>
					<</if>>
				<</for>>
			<</if>>
			You discard the $wardrobe.upper[$wear_upper].name.
			<<set $wardrobe.upper.deleteAt($wear_upper)>>
			<br>
		<<elseif $wear_delete is 2>>
			<<if $wardrobe.upper[$wear_upper].one_piece is 1>>
				<<for _d to 0; _d lt $wardrobe.lower.length; _d++>>
					<<if $wardrobe.upper[$wear_upper].set is $wardrobe.lower[_d].set and $wardrobe.upper[$wear_upper].colour is $wardrobe.lower[_d].colour and $wardrobe.upper[$wear_upper].accessory_colour is $wardrobe.lower[_d].accessory_colour>>
						<<set $wardrobe.lower[_d].integrity=$wardrobe.lower[_d].integrity_max>>
						<<break>>
					<</if>>
				<</for>>
			<</if>>
			You repair the the $wardrobe.upper[$wear_upper].name.
			<<set $wardrobe.upper[$wear_upper].integrity = $wardrobe.upper[$wear_upper].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<upperundress $wardrobe_location>>
			<<set $worn.upper to clone($wardrobe.upper[$wear_upper])>>
			<<set $wardrobe.upper.deleteAt($wear_upper)>>
				<<if $worn.upper.one_piece is 1>>
					<<for _e to 0; _e lt $wardrobe.lower.length; _e++>>
						<<if $wardrobe.lower[_e].set is $worn.upper.set and $wardrobe.lower[_e].colour is $worn.upper.colour>>
							<<set _matched to 0>>
							<<if $worn.upper.colourCustom isnot undefined and $wardrobe.lower[_e].colourCustom isnot undefined>>
								<<if $worn.upper.colourCustom is $wardrobe.lower[_e].colourCustom>>
									<<set _matched++>>
								<</if>>
							<<elseif $worn.upper.colourCustom is undefined and $wardrobe.lower[_e].colourCustom is undefined>>
								<<set _matched++>>
							<</if>>
							<<if $worn.upper.accessory_colourCustom isnot undefined and $wardrobe.lower[_e].accessory_colourCustom isnot undefined>>
								<<if $worn.upper.accessory_colourCustom is $wardrobe.lower[_e].accessory_colourCustom>>
									<<set _matched++>>
								<</if>>
							<<elseif $worn.upper.accessory_colourCustom is undefined and $wardrobe.lower[_e].accessory_colourCustom is undefined>>
								<<set _matched++>>
							<</if>>
							<<if _matched is 2 or $wardrobe.lower[_e].colour isnot "custom">>
								<<set _strip_restrict to 1>>/*Stops lowerundress from removing the top should it be removing the lower half of an outfit identical to the previously worn outfit*/
								<<lowerundress $wardrobe_location>>
								<<set $worn.lower to clone($wardrobe.lower[_e])>>
								<<set $wardrobe.lower.deleteAt(_e)>>
							<</if>>
						<</if>>
					<</for>>
				<</if>>
			You put on the $worn.upper.name.
			<br><br>
		<</if>>
	<</if>>



	<<if $wear_lower gte 0 and $corruption_slime gte 80 and $willpower lt 800 and $wardrobe.lower[$wear_lower].reveal lt 500 and !$wardrobe.lower[$wear_lower].type.includesAny("school", "event") and $wear_delete is 0>>
		<span class="red">You were unable to equip your $wardrobe.lower[$wear_lower].name as the slime in your ear did not permit it.</span>
		<br><br>
	<<elseif $wear_lower gte 0 and $worn.lower.cursed is 1 or $wear_lower gte 0 and $wardrobe.lower[$wear_lower].one_piece is 1 and $worn.upper.cursed is 1>>
		You try to remove the <<bottomscomma>> but fail. <<cursedtext $worn.upper.name $worn.lower.name>>
		<br><br>
	<<elseif $wear_lower is "strip">>
		<<if $wear_upper isnot "strip">>
			You remove the $worn.lower.name.<<lowerundress $wardrobe_location>>
			<br><br>
		<</if>>
	<<elseif $wear_lower is "towel">>
		<<lowerundress $wardrobe_location>><<set $worn.lower to clone($clothes.lower[3])>><<set $worn.lower.colour to clone($worn.lower.colour_options.random())>>
		You tie a towel around your waist.
		<br><br>
	<<elseif $wear_lower isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.lower[$wear_lower].name.
			<<set $wardrobe.lower.deleteAt($wear_lower)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.lower[$wear_lower].name.
			<<set $wardrobe.lower[$wear_lower].integrity = $wardrobe.lower[$wear_lower].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<lowerundress $wardrobe_location>>
			<<set $worn.lower to clone($wardrobe.lower[$wear_lower])>>
			<<set $wardrobe.lower.deleteAt($wear_lower)>>
				<<if $worn.lower.one_piece is 1>>
					<<for _e to 0; _e lt $wardrobe.upper.length; _e++>>
						<<if $wardrobe.upper[_e].set is $worn.lower.set and $wardrobe.upper[_e].colour is $worn.lower.colour>>
							<<upperundress $wardrobe_location>>
							<<set $worn.upper to clone($wardrobe.upper[_e])>>
						<<set $wardrobe.upper.deleteAt(_e)>>
					<</if>>
				<</for>>
			<</if>>
		<</if>>
		You put on the $worn.lower.name.
		<br><br>
	<</if>>

	<<if $wear_under_upper gte 0 and $corruption_slime gte 80 and $willpower lt 800 and $wardrobe.under_upper[$wear_under_upper].reveal lt 500 and !$wardrobe.under_upper[$wear_under_upper].type.includesAny("school", "event") and $wear_delete is 0>>
		<span class="red">You were unable to equip your $wardrobe.under_upper[$wear_under_upper].name as the slime in your ear did not permit it.</span>
		<br><br>
	<<elseif $wear_under_upper gte 0 and $worn.under_upper.cursed is 1 or $wear_under_upper gte 0 and $wardrobe.under_upper[$wear_under_upper].one_piece is 1 and $worn.under_lower.cursed is 1>>
		You try to remove the <<underbottomscomma>> but fail. <<cursedtext $worn.under_upper.name $worn.under_lower.name>>
		<br><br>
	<<elseif $wear_under_upper is "strip">>
		You remove the $worn.under_upper.name.<<underupperundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_under_upper isnot "none">>
		<<if $wear_delete is 1>>
		<<if $wardrobe.under_upper[$wear_under_upper].one_piece is 1>>
			<<for _d to 0; _d lt $wardrobe.under_lower.length; _d++>>
				<<if $wardrobe.under_upper[$wear_under_upper].set is $wardrobe.under_lower[_d].set and $wardrobe.under_upper[$wear_under_upper].colour is $wardrobe.under_lower[_d].colour and $wardrobe.under_upper[$wear_under_upper].accessory_colour is $wardrobe.under_lower[_d].accessory_colour>>
					<<set $wardrobe.under_lower.deleteAt(_d)>>
					<<break>>
					<<if $wardrobe.under_lower[_d].colour isnot "custom">>
						<<set $wardrobe.under_lower.deleteAt(_d)>>
						<<break>>
					<<else>>
						<<set _matched to 0>>
						<<if $wardrobe.under_upper[$wear_under_upper].colourCustom isnot undefined and $wardrobe.under_lower[_d].colourCustom isnot undefined>>
							<<if $wardrobe.under_upper[$wear_under_upper].colourCustom is $wardrobe.under_lower[_d].colourCustom>>
								<<set _matched++>>
							<</if>>
						<<elseif $wardrobe.under_upper[$wear_under_upper].colourCustom is undefined and $wardrobe.under_lower[_d].colourCustom is undefined>>
							<<set _matched++>>
						<</if>>
						<<if $wardrobe.under_upper[$wear_under_upper].accessory_colourCustom isnot undefined and $wardrobe.under_lower[_d].accessory_colourCustom isnot undefined>>
							<<if $wardrobe.under_upper[$wear_under_upper].accessory_colourCustom is $wardrobe.under_lower[_d].accessory_colourCustom>>
								<<set _matched++>>
							<</if>>
						<<elseif $wardrobe.under_upper[$wear_under_upper].accessory_colourCustom is undefined and $wardrobe.under_lower[_d].accessory_colourCustom is undefined>>
							<<set _matched++>>
						<</if>>
						<<if _matched is 2>>
							<<set $wardrobe.under_lower.deleteAt(_d)>>
							<<break>>
						<</if>>
					<</if>>
				<</if>>
			<</for>>
		<</if>>
		<<set $wardrobe.under_upper.deleteAt($wear_under_upper)>>
		<<elseif $wear_delete is 2>>
		<<if $wardrobe.under_upper[$wear_under_upper].one_piece is 1>>
			<<for _d to 0; _d lt $wardrobe.under_lower.length; _d++>>
				<<if $wardrobe.under_upper[$wear_under_upper].set is $wardrobe.under_lower[_d].set and $wardrobe.under_upper[$wear_under_upper].colour is $wardrobe.under_lower[_d].colour and $wardrobe.under_upper[$wear_under_upper].accessory_colour is $wardrobe.under_lower[_d].accessory_colour>>
					<<set $wardrobe.under_lower[_d].integrity=$wardrobe.under_lower[_d].integrity_max>>
					<<break>>
				<</if>>
			<</for>>
		<</if>>
		You repair the $wardrobe.under_upper[$wear_under_upper].name.
		<<set $wardrobe.under_upper[$wear_under_upper].integrity = $wardrobe.under_upper[$wear_under_upper].integrity_max>><<pass 1>>
		<br>
		<<else>>
		<<underupperundress $wardrobe_location>>
		<<set $worn.under_upper to clone($wardrobe.under_upper[$wear_under_upper])>>
		<<set $wardrobe.under_upper.deleteAt($wear_under_upper)>>
			<<if $worn.under_upper.one_piece is 1>>
				<<for _e to 0; _e lt $wardrobe.under_lower.length; _e++>>
					<<if $wardrobe.under_lower[_e].set is $worn.under_upper.set and $wardrobe.under_lower[_e].colour is $worn.under_upper.colour>>
						<<set _matched to 0>>
						<<if $worn.under_upper.colourCustom isnot undefined and $wardrobe.under_lower[_e].colourCustom isnot undefined>>
							<<if $worn.under_upper.colourCustom is $wardrobe.under_lower[_e].colourCustom>>
								<<set _matched++>>
							<</if>>
						<<elseif $worn.under_upper.colourCustom is undefined and $wardrobe.under_lower[_e].colourCustom is undefined>>
							<<set _matched++>>
						<</if>>
						<<if $worn.under_upper.accessory_colourCustom isnot undefined and $wardrobe.under_lower[_e].accessory_colourCustom isnot undefined>>
							<<if $worn.under_upper.accessory_colourCustom is $wardrobe.under_lower[_e].accessory_colourCustom>>
								<<set _matched++>>
							<</if>>
						<<elseif $worn.under_upper.accessory_colourCustom is undefined and $wardrobe.under_lower[_e].accessory_colourCustom is undefined>>
							<<set _matched++>>
						<</if>>
						<<if _matched is 2 or $wardrobe.under_lower[_e].colour isnot "custom">>
							<<set _strip_restrict to 1>>/*Stops underlowerundress from removing the top should it be removing the lower half of an outfit identical to the previously worn outfit*/
							<<underlowerundress $wardrobe_location>>
							<<set $worn.under_lower to clone($wardrobe.under_lower[_e])>>
							<<set $wardrobe.under_lower.deleteAt(_e)>>
						<</if>>
					<</if>>
				<</for>>
			<</if>>
		<</if>>
		You put on the $worn.under_upper.name.
		<br><br>
	<</if>>

	<<if $wear_under_lower gte 0 and $corruption_slime gte 80 and $willpower lt 800 and $wardrobe.under_lower[$wear_under_lower].reveal lt 500 and !$wardrobe.under_lower[$wear_under_lower].type.includesAny("school", "event") and $wear_delete is 0>>
		<span class="red">You were unable to equip your $wardrobe.under_lower[$wear_under_lower].name as the slime in your ear did not permit it.</span>
		<br><br>
	<<elseif $wear_under_lower gte 0 and $worn.under_lower.cursed is 1 or $wear_under_lower gte 0 and $wardrobe.under_lower[$wear_under_lower].one_piece is 1 and $worn.under_upper.cursed is 1>>
		You try to remove the <<underbottomscomma>> but fail. <<cursedtext $worn.under_lower.name $worn.under_upper.name>>
		<br><br>
	<<elseif $wear_under_lower is "strip">>
		<<if $wear_under_upper isnot "strip">>
			<<if $worn.under_lower.cursed is 1>>
			You try to remove the <<underbottomscomma>> but fail. <<cursedtext $worn.under_lower.name $worn.under_upper.name>>
			<br><br>
			<<else>>
			You remove the $worn.under_lower.name.
			<<underlowerundress $wardrobe_location>>
			<br><br>
			<</if>>
		<</if>>
	<<elseif $wear_under_lower isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.under_lower[$wear_under_lower].name.
			<<set $wardrobe.under_lower.deleteAt($wear_under_lower)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.under_lower[$wear_under_lower].name.
			<<set $wardrobe.under_lower[$wear_under_lower].integrity = $wardrobe.under_lower[$wear_under_lower].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<underlowerundress $wardrobe_location>>
			<<set $worn.under_lower to clone($wardrobe.under_lower[$wear_under_lower])>>
			<<set $wardrobe.under_lower.deleteAt($wear_under_lower)>>
			<<if $worn.under_lower.one_piece is 1>>
				<<for _e to 0; _e lt $wardrobe.under_upper.length; _e++>>
					<<if $wardrobe.under_upper[_e].set is $worn.under_lower.set and $wardrobe.under_upper[_e].colour is $worn.under_lower.colour>>
						<<underupperundress $wardrobe_location>>
						<<set $worn.under_upper to clone($wardrobe.under_upper[_e])>>
						<<set $wardrobe.under_upper.deleteAt(_e)>>
					<</if>>
				<</for>>
			<</if>>
		<</if>>
		You put on the $worn.under_lower.name.
		<br><br>
	<</if>>

	<<if $wear_head isnot "none" and $worn.head.cursed is 1>>
		You try to remove the $worn.head.name, but it won't budge. <<cursedtext $worn.head.name>>
		<br><br>
	<<elseif $wear_head is "strip">>
		You remove the $worn.head.name.
		<<headundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_head isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.head[$wear_head].name.
			<<set $wardrobe.head.deleteAt($wear_head)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.head[$wear_head].name.
			<<set $wardrobe.head[$wear_head].integrity = $wardrobe.head[$wear_head].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<headundress $wardrobe_location>>
			<<set $worn.head to clone($wardrobe.head[$wear_head])>>
			<<set $wardrobe.head.deleteAt($wear_head)>>
			You put on the $worn.head.name.
			<br><br>
		<</if>>
	<</if>>

	<<if $wear_face isnot "none" and $worn.face.cursed is 1>>
		You try to remove the $worn.face.name, but it won't budge. <<cursedtext $worn.face.name>>
		<br><br>
	<<elseif $wear_face is "strip">>
		You remove the $worn.face.name.
		<<faceundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_face isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.face[$wear_face].name.
			<<set $wardrobe.face.deleteAt($wear_face)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.face[$wear_face].name.
			<<set $wardrobe.face[$wear_face].integrity = $wardrobe.face[$wear_face].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<faceundress $wardrobe_location>>
			<<set $worn.face to clone($wardrobe.face[$wear_face])>>
			<<set $wardrobe.face.deleteAt($wear_face)>>
			You put on the $worn.face.name.
			<br><br>
		<</if>>
	<</if>>

	<<if $wear_neck isnot "none" and $worn.neck.cursed is 1>>
		You try to remove the $worn.neck.name, but it won't budge. <<cursedtext $worn.neck.name>>
		<br><br>
	<<elseif $wear_neck is "strip">>
		<<if $worn.neck.cursed is 1>>
			You try to remove the $worn.neck.name, but it won't budge. <<cursedtext $worn.neck.name>>
		<<else>>
			You remove the $worn.neck.name.<<neckundress $wardrobe_location>>
			<br><br>
		<</if>>
	<<elseif $wear_neck isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.neck[$wear_neck].name.
			<<set $wardrobe.neck.deleteAt($wear_neck)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.neck[$wear_neck].name.
			<<set $wardrobe.neck[$wear_neck].integrity = $wardrobe.neck[$wear_neck].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<neckundress $wardrobe_location>>
			<<set $worn.neck to clone($wardrobe.neck[$wear_neck])>>
			<<set $wardrobe.neck.deleteAt($wear_neck)>>
			You put on the $worn.neck.name.
			<br><br>
		<</if>>
	<</if>>

	<<if $wear_legs isnot "none" and $worn.legs.cursed is 1>>
		You try to remove the $worn.legs.name, but it won't budge. <<cursedtext $worn.legs.name>>
		<br><br>
	<<elseif $wear_legs is "strip">>
		You remove the $worn.legs.name.<<legsundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_legs isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.legs[$wear_legs].name.
			<<set $wardrobe.legs.deleteAt($wear_legs)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.legs[$wear_legs].name.
			<<set $wardrobe.legs[$wear_legs].integrity = $wardrobe.legs[$wear_legs].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<legsundress $wardrobe_location>>
			<<set $worn.legs to clone($wardrobe.legs[$wear_legs])>>
			<<set $wardrobe.legs.deleteAt($wear_legs)>>
			You put on the $worn.legs.name.
			<br><br>
		<</if>>
	<</if>>

	<<if $wear_feet isnot "none" and $worn.feet.cursed is 1>>
		You try to remove the $worn.feet.name, but it won't budge. <<cursedtext $worn.feet.name>>
		<br><br>
	<<elseif $wear_feet is "strip">>
		You remove the $worn.feet.name.<<feetundress $wardrobe_location>>
		<br><br>
	<<elseif $wear_feet isnot "none">>
		<<if $wear_delete is 1>>
			You discard the $wardrobe.feet[$wear_feet].name.
			<<set $wardrobe.feet.deleteAt($wear_feet)>>
			<br>
		<<elseif $wear_delete is 2>>
			You repair the $wardrobe.feet[$wear_feet].name.
			<<set $wardrobe.feet[$wear_feet].integrity = $wardrobe.feet[$wear_feet].integrity_max>><<pass 1>>
			<br>
		<<else>>
			<<feetundress $wardrobe_location>>
			<<set $worn.feet to clone($wardrobe.feet[$wear_feet])>>
			<<set $wardrobe.feet.deleteAt($wear_feet)>>
			You put on the $worn.feet.name.
			<br><br>
		<</if>>
	<</if>>



<<if $wear is "dry">><<set $wear to 0>>
<<set $upperwet to 0>><<set $lowerwet to 0>><<set $underlowerwet to 0>><<set $underupperwet to 0>>
You squeeze the water from your clothes.
<br><br>
<</if>>

<<set $wear to 0>>
<<set $wear_upper to "none">>
<<set $wear_lower to "none">>
<<set $wear_under_upper to "none">>
<<set $wear_under_lower to "none">>
<<set $wear_head to "none">>
<<set $wear_face to "none">>
<<set $wear_neck to "none">>
<<set $wear_legs to "none">>
<<set $wear_feet to "none">>
<<set $wear_outfit to "none">>


<<exposure>>

<</nobr>><</widget>>



<<widget "wardrobe">><<nobr>>
<<unset $tempDisable>>
<<clotheson>> /*Fixes perma pulled aside clothes introduced by 0.2.3.0 bug.*/

<<if $upperwet gte 1 or $lowerwet gte 1 or $underlowerwet or $underupperwet gte 1>>
<<link [[Dry your clothes|$passage]]>><<set $wear to "dry">><<script>>state.display(state.active.title, null)<</script>><</link>>
<br>
<</if>>

<<link [[Strip all|$passage]]>><<set $wear to "strip">><</link>>
<br><br>

__Clothing sets__
<br>
<<listoutfits>>


<hr>
__Clothing__
<br>


<<if $newWardrobeStyle>>
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','head')">Head</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','face')">Face</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','neck')">Neck</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','upper')">Upper</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','lower')">Lower</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','under_upper')">Under Upper</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','under_lower')">Under Lower</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','legs')">Legs</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','feet')">Feet</a> |
	<a onclick="wikifier('wardrobeNewOutfitDisplayer','NewOutfit')">New Outfit</a> |
	<br>
	<div id="wardrobeList">
		<<if $lastWardrobeSlot is "NewOutfit">>
			<<wardrobeNewOutfit>>
		<<else>>
			<<wardrobeList $lastWardrobeSlot>>
		<</if>>
	</div>
<<else>>
	<<oldWardrobeListDisplay>>
<</if>>


<<set $upperoff to 0>>
<<set $loweroff to 0>>
<<set $underloweroff to 0>>
<<set $underupperoff to 0>>
<<exposure>>

<</nobr>><</widget>>


<<widget "wardrobeNewOutfitDisplayer">><<nobr>>
<<switch $args[0]>>
	<<case "head">><<replace #wardrobeList>><<wardrobeList "head">><</replace>><<set $lastWardrobeSlot to "head">>
	<<case "face">><<replace #wardrobeList>><<wardrobeList "face">><</replace>><<set $lastWardrobeSlot to "face">>
	<<case "neck">><<replace #wardrobeList>><<wardrobeList "neck">><</replace>><<set $lastWardrobeSlot to "neck">>
	<<case "upper">><<replace #wardrobeList>><<wardrobeList "upper">><</replace>><<set $lastWardrobeSlot to "upper">>
	<<case "lower">><<replace #wardrobeList>><<wardrobeList "lower">><</replace>><<set $lastWardrobeSlot to "lower">>
	<<case "under_upper">><<replace #wardrobeList>><<wardrobeList "under_upper">><</replace>><<set $lastWardrobeSlot to "under_upper">>
	<<case "under_lower">><<replace #wardrobeList>><<wardrobeList "under_lower">><</replace>><<set $lastWardrobeSlot to "under_lower">>
	<<case "legs">><<replace #wardrobeList>><<wardrobeList "legs">><</replace>><<set $lastWardrobeSlot to "legs">>
	<<case "feet">><<replace #wardrobeList>><<wardrobeList "feet">><</replace>><<set $lastWardrobeSlot to "feet">>
	<<case "NewOutfit">><<replace #wardrobeList>><<wardrobeNewOutfit>><</replace>><<set $lastWardrobeSlot to "NewOutfit">>
<</switch>>
<</nobr>><</widget>>


<<widget "wardrobeClothingOptions">><<nobr>>
<br>
<<if $wear_delete is undefined>><<set $wear_delete to 0>><</if>>
<<if $wardrobeRepeat isnot true or ($wear_delete is 2 and $location isnot "home")>><<set $wear_delete to 0>><</if>>
<label> Wear <<print '<<radiobutton "$wear_delete" 0 '+($wear_delete is 0 or $wardrobeRepeat is false ? "checked" : "")+'>>'>></label> |
<label> Discard <<print '<<radiobutton "$wear_delete" 1 '+($wear_delete is 1 and $wardrobeRepeat is true ? "checked" : "")+'>>'>></label> |
<<if $sewingKit is 1 and $location is "home">>
	<label> Repair <<print '<<radiobutton "$wear_delete" 2 '+($wear_delete is 2 and $wardrobeRepeat is true ? "checked" : "")+'>>'>></label> |
<</if>>
<label> Repeat Actions <<print '<<checkbox "$wardrobeRepeat" false true '+($wardrobeRepeat ? "checked" : "")+'>>'>></label>

<<if $wear_delete is 1 and $wardrobeRepeat is true>>
	<h2 class="red">Discard On Repeat</h2>
<<else>>
	<br><br>
<</if>>
<</nobr>><</widget>>


<<widget "wardrobeNewOutfit">><<nobr>>
<br>
Add new set:
<br>
Name: <input id="outfitName" type="text" value="Custom" onfocus="SugarCube.State.variables.tempDisable = true;">
<br>
Type: <label>Everyday <<radiobutton "$outfit_type" 0 checked>></label> | <label>Sleep<<radiobutton "$outfit_type" "sleep">></label> | <label>Swimming<<radiobutton "$outfit_type" "swim">></label>
<br>
<label>
	Save Clothes Colours in Set
	<<print '<<checkbox "$saveColor" false true '+($saveColor is true ? "checked" : "")+'>>'>>
</label>
<br>
<<link [[Add current clothes as new set|$passage]]>>
	<<script>>
		SugarCube.State.variables.outfit_name = document.getElementById("outfitName").value;
	<</script>>
	<<set $outfit.push(
		{index: $outfit.length,
		name: $outfit_name,
		upper: clone($worn.upper.name),
		lower: clone($worn.lower.name),
		under_upper: clone($worn.under_upper.name),
		under_lower: clone($worn.under_lower.name),
		head: clone($worn.head.name),
		face: clone($worn.face.name),
		neck: clone($worn.neck.name),
		legs: clone($worn.legs.name),
		feet: clone($worn.feet.name),
		type: ["normal"]
		},
	)>>

	<<if $outfit_name is "" or $outfit_name is "Custom">><<print '<<set $outfit_name to "Custom ' + $outfit.length + '">>'>><</if>>
	<<set $outfit.last().name to $outfit_name>>
	<<if $outfit_type>>
		<<set $outfit.last().type.push($outfit_type)>>
	<</if>>

	<<if $saveColor is true>>
		<<set _equip to ["upper", "lower", "under_upper", "under_lower","head", "face", "neck", "legs", "feet"]>>
		<<set _colors to {}>>
		<<for _i to 0; _i lt _equip.length; _i++>>
			<<set _colors[_equip[_i]] to [clone($worn[_equip[_i]].colour),clone($worn[_equip[_i]].accessory_colour)]>>
			<<if $worn[_equip[_i]].colour is "custom" or $worn[_equip[_i]].accessory_colour is "custom">>
				<<run _colors[_equip[_i]+"custom"] to [clone($worn[_equip[_i]].colourCustom),clone($worn[_equip[_i]].accessory_colourCustom)]>>
			<</if>>
		<</for>>
		<<set $outfit.last().colors to clone(_colors)>>
	<<else>>
		<<set $outfit.last().colors to false>>
	<</if>>
<</link>>
<</nobr>><</widget>>

<<widget "wardrobeintegrity">><<nobr>>
<<set _war_int to $args[0]>>
<<if $wardrobe[_war_int][_i].integrity gt (($wardrobe[_war_int][_i].integrity_max / 10) * 9)>>
<<elseif $wardrobe[_war_int][_i].integrity gt (($wardrobe[_war_int][_i].integrity_max / 10) * 5)>>
(frayed)
<<elseif $wardrobe[_war_int][_i].integrity gt (($wardrobe[_war_int][_i].integrity_max / 10) * 2)>>
(torn)
<<else>>
(tattered)
<</if>>
<</nobr>><</widget>>

<<widget "wardrobesanity">><<nobr>>
/*Fixes invisible outfit bottoms caused by bugs in previous versions*/

<<for _i to 0; _i lt $wardrobe.lower.length; _i++>>
	<<if $wardrobe.lower[_i].one_piece is 1>><<set _lower_sane to 0>>
		<<for _e to 0; _e lt $wardrobe.upper.length; _e++>>
			<<if $wardrobe.upper[_e].one_piece is 1 and $wardrobe.upper[_e].set is $wardrobe.lower[_i].set and $wardrobe.upper[_e].colour is $wardrobe.lower[_i].colour>>
			<<set _lower_sane to 1>>
			<</if>>
		<</for>>
		<<if _lower_sane isnot 1>>
		<<set $wardrobe.lower[_i].one_piece to "broken">>
		<</if>>
	<</if>>
<</for>>


<<for _i to 0; _i lt $wardrobe.under_lower.length; _i++>>
	<<if $wardrobe.under_lower[_i].one_piece is 1>><<set _under_lower_sane to 0>>
		<<for _e to 0; _e lt $wardrobe.under_upper.length; _e++>>
			<<if $wardrobe.under_upper[_e].one_piece is 1 and $wardrobe.under_upper[_e].set is $wardrobe.under_lower[_i].set and $wardrobe.under_upper[_e].colour is $wardrobe.under_lower[_i].colour>>
			<<set _under_lower_sane to 1>>
			<</if>>
		<</for>>
		<<if _under_lower_sane isnot 1>>
		<<set $wardrobe.under_lower[_i].one_piece to "broken">>
		<</if>>
	<</if>>
<</for>>

<</nobr>><</widget>>


<<widget "wardrobeList">><<nobr>>
<<wardrobeClothingOptions>>
<<set _wardrobe_list to $args[0]>>
<<set _errorPrevent to false>>
<<switch _wardrobe_list>>
	<<case "head">><<set _wear to "wear_head">>
	<<case "face">><<set _wear to "wear_face">>
	<<case "neck">><<set _wear to "wear_neck">>
	<<case "upper">><<set _wear to "wear_upper">>
	<<case "lower">><<set _wear to "wear_lower">>
	<<case "under_upper">><<set _wear to "wear_under_upper">>
	<<case "under_lower">><<set _wear to "wear_under_lower">>
	<<case "legs">><<set _wear to "wear_legs">>
	<<case "feet">><<set _wear to "wear_feet">>
	<<default>><<set _errorPrevent to true>>
<</switch>>
<<set _outfitTypes to ["upper","lower","under_upper","under_lower"]>>
<<set _loweroutfitCheck to ["lower","under_lower"]>>
<<if _errorPrevent isnot true>>
	__<<print _wardrobe_list[0].toUpperCase() + _wardrobe_list.substring(1)>>__ <i>$wardrobe[_wardrobe_list].length / $wardrobe.space</i>
	<br>
	Order by: 
	/*Undefined error for unknown reason*/
	/*<a @onclick="`wikifier('wardrobeListReorder', '`+ $lastWardrobeSlot + `', 'name');`">Name</a> |*/
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'name');">Name</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'color');">Colour</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'lewd');">Lewd</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'integrity');">Integrity</a> |
	<<if _outfitTypes.includes(_wardrobe_list)>>
		<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'outfit');">Outfit Status</a> |
	<</if>>
	<br>
	Inverse Order by: 
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'name', true);">Name</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'color', true);">Colour</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'lewd', true);">Lewd</a> |
	<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'integrity', true);">Integrity</a> |
	<<if _outfitTypes.includes(_wardrobe_list)>>
		<a onclick="wikifier('wardrobeListReorder', SugarCube.State.variables.lastWardrobeSlot, 'outfit', true);">Outfit Status</a> |
	<</if>>
	<br><br>

	<<if $worn[_wardrobe_list].name isnot "naked">>
		<div class="wardrobeItem"><a @onclick="`SugarCube.State.variables.`+_wear+` = 'strip';SugarCube.State.display(SugarCube.State.variables.passage)`">Strip</a></div>
	<</if>>
	<<if _wardrobe_list is "upper">>
		<div class="wardrobeItem"><a onclick="SugarCube.State.variables.wear_upper='large_towel';SugarCube.State.display(SugarCube.State.variables.passage)">Large Towel</a></div>
	<</if>>
	<<if _wardrobe_list is "upper" or _wardrobe_list is "lower" >>
		<div class="wardrobeItem"><a @onclick="`SugarCube.State.variables.`+_wear+` = 'towel';SugarCube.State.display(SugarCube.State.variables.passage)`">Towel</a></div>
	<</if>>

	<<for _i to 0; _i lt $wardrobe[_wardrobe_list].length; _i++>>
		<<set _item to $wardrobe[_wardrobe_list][_i]>>
		<<if _loweroutfitCheck.includes(_wardrobe_list)>>
			<<if _item.one_piece is 1>>
				<<continue>>
			<</if>>
		<</if>>
		<div class="wardrobeItem">
		<<clothingicon _item>><a @onclick="`SugarCube.State.variables.`+_wear+` = `+ _i +`;SugarCube.State.display(SugarCube.State.variables.passage)`">_item.name_cap</a>
		<<if _item.gender is "m">>
			| <span class="blue">♂</span> |
		<<elseif _item.gender is "f">>
			| <span class="pink">♀</span> |
		<<else>>
			|
		<</if>>
		<<if _item.colour isnot 0>>
			<span @class="$wardrobe[_wardrobe_list][_i].colour">(_item.colour)</span>
		<</if>>
		<<if _outfitTypes.includes(_wardrobe_list)>>
			<<if _item.one_piece is 1>>
				<span class="gold">(Outfit)</span>
			<<elseif _item.one_piece is "broken">>
				<span class="red">(Broken)</span>
			<</if>>
		<</if>>
		<<wardrobeintegrity _wardrobe_list>> |
		<<reveal _item.reveal>>
		</div>
	<</for>>
	<div style="clear:both;"></div>
<<else>>
	An error occured, please report and error about 'widget "wardrobeList"'.
<</if>>

<</nobr>><</widget>>

<<widget "oldWardrobeListDisplay">><<nobr>>
<<wardrobeClothingOptions>>
<<oldWardrobeList "upper" "outfits">>
<<oldWardrobeList "upper" "non-outfits">>
<<oldWardrobeList "lower">>
<<oldWardrobeList "under_upper" "outfits">>
<<oldWardrobeList "under_upper" "non-outfits">>
<<oldWardrobeList "under_lower">>
<<oldWardrobeList "head">>
<<oldWardrobeList "face">>
<<oldWardrobeList "neck">>
<<oldWardrobeList "legs">>
<<oldWardrobeList "feet">>
<div style="clear:both;"></div>
<<wardrobeNewOutfit>>
<</nobr>><</widget>>

<<widget "oldWardrobeList">><<nobr>>

<<set _wardrobe_list to $args[0]>>
<<set _showType to $args[1]>>
<<switch _wardrobe_list>>
	<<case "head">><<set _wear to "wear_head">>
	<<case "face">><<set _wear to "wear_face">>
	<<case "neck">><<set _wear to "wear_neck">>
	<<case "upper">><<set _wear to "wear_upper">>
	<<case "lower">><<set _wear to "wear_lower">>
	<<case "under_upper">><<set _wear to "wear_under_upper">>
	<<case "under_lower">><<set _wear to "wear_under_lower">>
	<<case "legs">><<set _wear to "wear_legs">>
	<<case "feet">><<set _wear to "wear_feet">>
<</switch>>
<<set _outfitTypes to ["upper","lower","under_upper","under_lower"]>>
<<set _loweroutfitCheck to ["lower","under_lower"]>>

<div class="clothingBox">
__<<print _wardrobe_list[0].toUpperCase() + _wardrobe_list.substring(1)>>__ <i>$wardrobe[_wardrobe_list].length / $wardrobe.space</i>
<br><br>
<div>
<ul>
<<if $worn[_wardrobe_list].name isnot "naked">>
	<li><a @onclick="`SugarCube.State.variables.`+_wear+` = 'strip';SugarCube.State.display(SugarCube.State.variables.passage)`">Strip</a></li>
<</if>>
<<if _wardrobe_list is "upper">>
	<li><a onclick="SugarCube.State.variables.wear_upper='large_towel';SugarCube.State.display(SugarCube.State.variables.passage)">Large Towel</a></li>
<</if>>
<<if _wardrobe_list is "upper" or _wardrobe_list is "lower" >>
	<li><a @onclick="`SugarCube.State.variables.`+_wear+` = 'towel';SugarCube.State.display(SugarCube.State.variables.passage)`">Towel</a></li>
<</if>>
<<for _i to 0; _i lt $wardrobe[_wardrobe_list].length; _i++>>
	<<set _item to $wardrobe[_wardrobe_list][_i]>>
	<<if _loweroutfitCheck.includes(_wardrobe_list)>>
		<<if _item.one_piece is 1>>
			<<continue>>
		<</if>>
	<</if>>
	<<if _outfitTypes.includes(_wardrobe_list)>>
		<<if (_item.one_piece is 1 and _showType is "non-outfits") or (_item.one_piece isnot 1 and _showType is "outfits")>>
			<<continue>>
		<</if>>
	<</if>>
	<li>/*<<clothingicon _item>>*/<a @onclick="`SugarCube.State.variables.`+_wear+` = `+ _i +`;SugarCube.State.display(SugarCube.State.variables.passage)`">_item.name_cap</a>
	<<if $wardrobe[_wardrobe_list][_i].colour isnot 0>>
		<span @class="$wardrobe[_wardrobe_list][_i].colour">(_item.colour)</span>
	<</if>>
	<<wardrobeintegrity _wardrobe_list>>
	</li>
<</for>>
</ul>
</div></div>

<</nobr>><</widget>>

<<widget "wardrobeListReorder">><<nobr>>
<<if $args[0] and $args[1]>>
	<<set _slot to $args[0]>>
	<<set _orderType to $args[1]>>
	<<set _descending to $args[2]>>
	
	<<set _wardrobeItems to clone($wardrobe[_slot])>>
	<<set _newWardrobeItems to []>>
	<<switch _orderType>>
	<<case "name">>
		<<set _itemNames to []>>
		<<for _i to 0; _i lt _wardrobeItems.length; _i++>>
			<<run _itemNames.pushUnique(_wardrobeItems[_i].name)>>
		<</for>>
		<<if _descending>>
			<<set _sortedItemNames to _itemNames.sort(function(a, b){return b.localeCompare(a)})>>
		<<else>>
			<<set _sortedItemNames to _itemNames.sort()>>
		<</if>>
		
		<<for _i to 0; _i lt _sortedItemNames.length; _i++>>
			<<for _j to 0; _j lt _wardrobeItems.length; _j++>>
				<<if _wardrobeItems[_j].name is _sortedItemNames[_i]>>
					<<run _newWardrobeItems.push(clone(_wardrobeItems[_j]))>>
				<</if>>
			<</for>>
		<</for>>
	<<case "color">>
		<<set _itemColors to []>>
		<<for _i to 0; _i lt _wardrobeItems.length; _i++>>
			<<run _itemColors.pushUnique(_wardrobeItems[_i].colour)>>
		<</for>>
		<<if _descending>>
			<<set _sortedItemColors to _itemColors.sort(function(a, b){
				if(a === 0){
					return 0;
				}
				if(b === 0){
					return 0;
				}
				return b.localeCompare(a);
			})>>
		<<else>>
			<<set _sortedItemColors to _itemColors.sort()>>
		<</if>>
		
		<<for _i to 0; _i lt _sortedItemColors.length; _i++>>
			<<for _j to 0; _j lt _wardrobeItems.length; _j++>>
				<<if _wardrobeItems[_j].colour is _sortedItemColors[_i]>>
					<<run _newWardrobeItems.push(clone(_wardrobeItems[_j]))>>
				<</if>>
			<</for>>
		<</for>>
	<<case "integrity">>
		<<set _itemIntegrity to []>>
		<<for _i to 0; _i lt _wardrobeItems.length; _i++>>
			<<run _itemIntegrity.pushUnique((_wardrobeItems[_i].integrity / _wardrobeItems[_i].integrity_max))>>
		<</for>>
		<<if _descending>>
			<<set _sortedItemIntegrity to _itemIntegrity.sort()>>
		<<else>>
			<<set _sortedItemIntegrity to _itemIntegrity.sort(function(a, b){return b-a})>>
		<</if>>
		
		<<for _i to 0; _i lt _sortedItemIntegrity.length; _i++>>
			<<for _j to 0; _j lt _wardrobeItems.length; _j++>>
				<<if (_wardrobeItems[_j].integrity / _wardrobeItems[_j].integrity_max) is _sortedItemIntegrity[_i]>>
					<<run _newWardrobeItems.push(clone(_wardrobeItems[_j]))>>
				<</if>>
			<</for>>
		<</for>>
	<<case "outfit">>
		<<if _descending>>
			<<set _status to ["broken",0,1]>>
		<<else>>
			<<set _status to [1,0,"broken"]>>
		<</if>>
		<<for _i to 0; _i lt _status.length; _i++>>
			<<for _j to 0; _j lt _wardrobeItems.length; _j++>>
				<<if _wardrobeItems[_j].one_piece is _status[_i]>>
					<<run _newWardrobeItems.push(clone(_wardrobeItems[_j]))>>
				<</if>>
			<</for>>
		<</for>>
	<<case "lewd">>
		<<set _itemReveal to []>>
		<<for _i to 0; _i lt _wardrobeItems.length; _i++>>
			<<run _itemReveal.pushUnique(_wardrobeItems[_i].reveal)>>
		<</for>>
		<<if _descending>>
			<<set _sortedItemReveal to _itemReveal.sort()>>
		<<else>>
			<<set _sortedItemReveal to _itemReveal.sort(function(a, b){return b-a})>>
		<</if>>
		<<for _i to 0; _i lt _sortedItemReveal.length; _i++>>
			<<for _j to 0; _j lt _wardrobeItems.length; _j++>>
				<<if _wardrobeItems[_j].reveal is _sortedItemReveal[_i]>>
					<<run _newWardrobeItems.push(clone(_wardrobeItems[_j]))>>
				<</if>>
			<</for>>
		<</for>>
	<</switch>>
	
	<<if _newWardrobeItems isnot []>>
		<<set $wardrobe[_slot] to clone(_newWardrobeItems)>>
	<</if>>
	<<replace #wardrobeList>><<wardrobeList $lastWardrobeSlot>><</replace>>
<</if>>
<</nobr>><</widget>>

:: Wardrobe [nobr]
<<effects>>
<<set $wardrobe_location to "wardrobe">>
You look in your wardrobe.
<br><br>
<<wardrobewear>>
<<link [[Close wardrobe|Bedroom]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<<wardrobe>>

:: Changing Room [nobr]
<<effects>><<set $outside to 0>><<set $location to "beach">>
<<set $wardrobe_location to "wardrobe">>
You are in a small wooden changing room.
<br><br>
<<wardrobewear>>
<<if $exposed lte 1>>
<<link[[Leave|Beach]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<<else>>
You can't go out like this!
<br><br>
<</if>>
<<wardrobe>>

:: Eden Wardrobe [nobr]
<<effects>>
You look through the cupboard containing your clothes. There's an old dressing screen for privacy.
<br><br>
<<set $wardrobe_location to "wardrobe">>
<<wardrobewear>>
<<if $exhibitionism lte 54>>
	<<if $exposed lte 0>>
	<<link [[Done|Eden Cabin]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't remain undressed like this!
	<br><br>
	<</if>>
<<else>>
	<<if $exposed lte 1>>
	<<link [[Done|Eden Cabin]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't remain undressed like this!
	<br><br>
	<</if>>
<</if>>
<<wardrobe>>

:: Asylum Wardrobe [nobr]
<<effects>>
You look through the cupboard containing your clothes.
<br><br>
<<set $wardrobe_location to "wardrobe">>
<<wardrobewear>>
<<if $exhibitionism lte 54>>
	<<if $exposed lte 0>>
	<<link [[Done|Asylum Cell]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't remain undressed like this!
	<br><br>
	<</if>>
<<elseif $exhibitionism gte 75>>
<<link [[Done|Asylum Cell]]>><</link>>
<br><br>
<<else>>
	<<if $exposed lte 1>>
	<<link [[Done|Asylum Cell]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't remain undressed like this!
	<br><br>
	<</if>>
<</if>>
<<wardrobe>>

:: Strip Club Dressing Room [nobr]
<<effects>><<set $outside to 0>><<set $location to "town">>
<<set $wardrobe_location to "wardrobe">>
You are in the strip club's dressing room. <<if $daystate isnot "day" and $daystate isnot "dawn">>There are a few mirrors, currently occupied by staff fixing their hair and makeup.<</if>>
<br><br>
<<wardrobewear>>
<<if $exhibitionism lte 54>>
	<<if $exposed lte 0>>
	<<link [[Back to the club (0:01)|Strip Club]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't go out like this!
	<br><br>
	<</if>>
<<elseif $exhibitionism gte 95>>
<<link [[Back to the club (0:01)|Strip Club]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<<else>>
	<<if $exposed lte 1>>
	<<link [[Back to the club (0:01)|Strip Club]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't go out like this!
	<br><br>
	<</if>>
<</if>>
<<wardrobe>>

:: Brothel Dressing Room [nobr]
<<effects>><<set $outside to 0>><<set $location to "town">>
<<set $wardrobe_location to "wardrobe">>
You are in the brothel's dressing room. There are a few mirrors, currently occupied by staff fixing their hair and makeup.
<br><br>
<<wardrobewear>>
<<if $exhibitionism lte 54>>
	<<if $exposed lte 0>>
	<<link [[Back to the brothel (0:01)|Brothel]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't go out like this!
	<br><br>
	<</if>>
<<elseif $exhibitionism gte 95>>
<<link [[Back to the brothel (0:01)|Brothel]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<<else>>
	<<if $exposed lte 1>>
	<<link [[Back to the brothel (0:01)|Brothel]]>><<pass 1>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
	<br><br>
	<<else>>
	You can't go out like this!
	<br><br>
	<</if>>
<</if>>
<<wardrobe>>


:: School Boy Wardrobe [nobr]
<<effects>><<set $outside to 0>><<set $location to "pool">>
<<set $wardrobe_location to "wardrobe">>
You stand in front of your open locker.
<br><br>
<<wardrobewear>>
<<if $exposed gte 2 and $exhibitionism lt 75>>
You can't go out like this!
<br><br>
<<else>>
<<link [[Leave|School Boy Changing Room]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<</if>>

<<wardrobe>>


:: School Girl Wardrobe [nobr]
<<effects>><<set $outside to 0>><<set $location to "pool">>
<<set $wardrobe_location to "wardrobe">>
You stand in front of your open locker.
<br><br>
<<wardrobewear>>
<<if $exposed gte 2 and $exhibitionism lt 75>>
You can't go out like this!
<br><br>
<<else>>
<<link [[Leave|School Girl Changing Room]]>><<unset $saveColor>><<unset $wardrobeRepeat>><<unset $tempDisable>><</link>>
<br><br>
<</if>>


<<wardrobe>>

